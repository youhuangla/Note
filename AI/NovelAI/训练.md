# Train

[Stable diffusion dreambooth最新教程，本地训练模型画出gta风刘亦菲【AI绘画】_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1Zx4y137P6/?spm_id_from=333.337.search-card.all.click&vd_source=187217104dfd0bc027cc65f8420627b0)

Exception training model: ''CheckpointInfo' object is not subscriptable'.

>   I bypassed this error by:
>
>   1.  Restarting the whole webui
>   2.  In the Settings tab, making sure the Generate Classification Images Using txt2img is **not** checked.
>
>   This is a new error that started appearing recently.
>
>   Maybe it has something to do with Automatic's new way of showing up new Text2Images but I am just guessing

原子カノン, [2023/1/16 22:20]
[In reply to M]
colab上的默认配置效果就挺好，自用的时候基本就变下步数

https://colab.research.google.com/drive/1cEk2yxPiipjl1D9jITGQEOlVYyUsLQHo?usp=sharing

Exclude:

```
1girl,asuna (sao), brown eyes, braid, brown hair, face, bangs,  eyebrows visible through hair, parted bangs, sidelocks

```

在文件头追加

```
sed -i '1s/^/asuna_(\sao\), 1girl,/' *.txt
```



[How to insert a text at the beginning of a file in Linux?](https://www.tutorialspoint.com/how-to-insert-a-text-at-the-beginning-of-a-file-in-linux)

## Lora

[【AI绘画】LoRA 在线云端训练教程 AutoDL - 哔哩哔哩 (bilibili.com)](https://www.bilibili.com/read/cv21450198?spm_id_from=333.999.list.card_opus.click)

在 `lora-scripts/train.sh` 中改优化器设置

[秋葉aaaki的动态 - 哔哩哔哩 (bilibili.com)](https://www.bilibili.com/opus/765826255751741460?spm_id_from=333.999.0.0)

```shell
use_8bit_adam=0 # use 8bit adam optimizer | 使用 8bit adam 优化器节省显存，默认启用。部分 10 系老显卡无法使用，修改为 0 禁用。
use_lion=1 # use lion optimizer | 使用 Lion 优化器
```

```bash
(lora) root@autodl-container-9d3911a33c-3b99faec:~/lora-scripts# git pull && git submodule update
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 2), reused 3 (delta 2), pack-reused 0
Unpacking objects: 100% (3/3), 528 bytes | 264.00 KiB/s, done.
From https://github.com/Akegarasu/lora-scripts
   a3ba8f5..6284050  main       -> origin/main
Updating a3ba8f5..6284050
Fast-forward
 README.md | 22 ++++++----------------
```

